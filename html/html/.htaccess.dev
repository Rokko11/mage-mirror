############################################
## angepasste .htaccess für iWelt-Hosting
############################################

<IfModule mod_rewrite.c>

	############################################
	## enable rewrites

    RewriteEngine on

	############################################
	## uncomment next line to enable light API calls processing

	RewriteRule ^api/([a-z][0-9a-z_]+)/?$ api.php?type=$1 [QSA,L]

	############################################
	## rewrite API2 calls to api.php (by now it is REST only)

    RewriteRule ^api/rest api.php?type=rest [QSA,L]

	############################################
	## workaround for HTTP authorization
	## in CGI environment

    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

	############################################
	## TRACE and TRACK HTTP methods disabled to prevent XSS attacks

    RewriteCond %{REQUEST_METHOD} ^TRAC[EK]
    RewriteRule .* - [L,R=405]

	############################################
	## redirect for mobile user agents

    #RewriteCond %{REQUEST_URI} !^/mobiledirectoryhere/.*$
    #RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
    #RewriteRule ^(.*)$ /mobiledirectoryhere/ [L,R=302]

	############################################
    ## Entfernen eines überzähligen abschließenden Slashs
    #RewriteRule ^((.+).(html|shtml|php))/$ /$1 [R=301,L]

    ############################################
    ## Anhängen eines Slashs, falls dieser fehlt.
    #RewriteCond %{REQUEST_METHOD} !^POST$
    #RewriteCond %{REQUEST_FILENAME} !-f
    #RewriteCond %{REQUEST_FILENAME} !-d
    #RewriteCond %{REQUEST_FILENAME} !-l
    #RewriteCond %{REQUEST_URI} !(.*)/$
    #RewriteCond %{REQUEST_URI} !(.*).(html|shtml|php)$
    #RewriteRule ^(.*)$ /$1/ [R=301,L]

    ############################################
	## always send 404 on missing files in these folders

    RewriteCond %{REQUEST_URI} !^/(media|skin|js)/

	############################################
	## never rewrite for existing files, directories and links

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l

	############################################
	## rewrite everything else to index.php

    RewriteRule .* index.php [L]

</IfModule>

<IfModule mod_expires.c>

	############################################
	## Add default Expires header
	## http://developer.yahoo.com/performance/rules.html#expires

    ExpiresDefault "access plus 1 year"

</IfModule>

###########################################
## Deny access to release notes to prevent disclosure of the installed Magento version

<Files RELEASE_NOTES.txt>
    order allow,deny
	deny from all
</Files>
